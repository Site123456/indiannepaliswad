<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Indian Nepali Swad – Menu INS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    /* =========================================================================
       THEME TOKENS
       ========================================================================= */

    :root {
      --page-max-width: 1120px;

      --radius-xl: 22px;
      --radius-lg: 16px;
      --radius-md: 10px;
      --radius-pill: 999px;

      --transition-fast: 0.15s ease-out;
      --transition-med: 0.22s ease-out;

      --font-sans: system-ui, -apple-system, BlinkMacSystemFont,
        "SF Pro Text", "Segoe UI", sans-serif;
      --font-serif: "Georgia", "Times New Roman", serif;

      /* Warm light theme */
      --bg-page: #f6efe7;
      --bg-surface: rgba(255, 255, 255, 0.92);
      --bg-surface-strong: #ffffff;
      --bg-glass: rgba(255, 255, 255, 0.92);
      --bg-chip: #f3e3d3;
      --bg-chip-active: #c85f1f;
      --bg-tag: rgba(0, 0, 0, 0.04);

      --border-subtle: rgba(80, 52, 34, 0.12);
      --border-strong: rgba(80, 52, 34, 0.22);

      --text-main: #3a2416;
      --text-soft: #8d7362;
      --text-mute: #b39a85;

      --accent: #c85f1f;
      --accent-soft: rgba(200, 95, 31, 0.13);
      --accent-strong: #a34717;
      --accent-border: rgba(200, 95, 31, 0.5);

      --price-color: #a34717;

      --search-bg: rgba(255, 250, 244, 0.98);
      --search-border: rgba(80, 52, 34, 0.22);
      --search-placeholder: #b99d85;

      --card-bg: rgba(255, 255, 255, 0.96);
      --card-bg-hover: rgba(248, 239, 231, 0.98);
      --card-border: rgba(80, 52, 34, 0.16);

      --badge-bg: rgba(200, 95, 31, 0.08);
      --badge-text: #8a3b11;

      --grid-gap: 14px;
      --shadow-soft: 0 10px 26px rgba(0, 0, 0, 0.12);
    }

    :root[data-theme="dark"] {
      /* Dark glass + warm accents */
      --bg-page: #050307;
      --bg-surface: rgba(12, 9, 18, 0.92);
      --bg-surface-strong: rgba(14, 11, 22, 0.98);
      --bg-glass: rgba(16, 12, 26, 0.94);
      --bg-chip: rgba(25, 18, 36, 0.96);
      --bg-chip-active: #ff9442;
      --bg-tag: rgba(255, 255, 255, 0.04);

      --border-subtle: rgba(255, 255, 255, 0.12);
      --border-strong: rgba(255, 255, 255, 0.22);

      --text-main: #f7eee4;
      --text-soft: #c8b4a4;
      --text-mute: #9f8774;

      --accent: #ff9442;
      --accent-soft: rgba(255, 148, 66, 0.18);
      --accent-strong: #ffc75e;
      --accent-border: rgba(255, 199, 94, 0.7);

      --price-color: #ffc75e;

      --search-bg: rgba(18, 13, 26, 0.95);
      --search-border: rgba(255, 255, 255, 0.24);
      --search-placeholder: #aa8f7b;

      --card-bg: rgba(21, 15, 32, 0.98);
      --card-bg-hover: rgba(30, 19, 49, 0.98);
      --card-border: rgba(255, 255, 255, 0.14);

      --badge-bg: rgba(255, 148, 66, 0.12);
      --badge-text: #fde0b3;

      --grid-gap: 12px;
      --shadow-soft: 0 14px 38px rgba(0, 0, 0, 0.8);
    }

    /* =========================================================================
       BASE
       ========================================================================= */

    *, *::before, *::after {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-sans);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      background: var(--bg-page);
      color: var(--text-main);
      transition: background var(--transition-med), color var(--transition-med);
      overflow-x: hidden;
    }

    img {
      max-width: 100%;
      display: block;
    }

    button {
      font-family: inherit;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* =========================================================================
       ANIMATED BACKGROUND (subtle)
       ========================================================================= */

    .bg-animated {
      position: fixed;
      inset: -20%;
      background:
        radial-gradient(circle at 10% 0%, rgba(255, 182, 116, 0.3), transparent 55%),
        radial-gradient(circle at 90% 20%, rgba(255, 108, 140, 0.28), transparent 55%),
        radial-gradient(circle at 0% 90%, rgba(122, 140, 255, 0.2), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(255, 219, 144, 0.25), transparent 60%);
      opacity: 0.45;
      pointer-events: none;
      z-index: 0;
      animation: bgFloat 40s linear infinite alternate;
    }

    @keyframes bgFloat {
      0%   { transform: translate3d(0, 0, 0) scale(1); }
      50%  { transform: translate3d(-8px, 10px, 0) scale(1.02); }
      100% { transform: translate3d(10px, -12px, 0) scale(1.04); }
    }

    :root[data-theme="dark"] .bg-animated {
      opacity: 0.5;
      background:
        radial-gradient(circle at 10% 0%, rgba(255, 158, 94, 0.38), transparent 55%),
        radial-gradient(circle at 90% 15%, rgba(255, 90, 145, 0.32), transparent 55%),
        radial-gradient(circle at 5% 100%, rgba(112, 160, 255, 0.24), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(255, 210, 126, 0.3), transparent 60%);
    }

    /* =========================================================================
       APP WRAPPER
       ========================================================================= */

    .app-root {
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: var(--page-max-width);
      margin: 0 auto;
      padding: 82px 12px 20px;
    }

    @media (min-width: 900px) {
      .app-root {
        padding: 90px 20px 28px;
      }
    }

    /* =========================================================================
       STICKY HEADER
       ========================================================================= */

    .top-shell {
      position: fixed;
      inset-inline: 0;
      top: 0;
      z-index: 20;
      display: flex;
      justify-content: center;
      pointer-events: none;
    }

    .top-bar {
      width: 100%;
      max-width: var(--page-max-width);
      margin: 10px 12px 0;
      padding: 8px 10px;
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-subtle);
      background: var(--bg-glass);
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      pointer-events: auto;
      backdrop-filter: blur(16px);
    }

    :root[data-theme="dark"] .top-bar {
      background: var(--bg-glass);
    }

    @media (min-width: 900px) {
      .top-bar {
        margin-inline: 18px;
        padding: 10px 16px;
      }
    }

    .brand-side {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }

    .brand-logo {
      width: 38px;
      height: 38px;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid var(--border-strong);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      flex-shrink: 0;
      background: #f6d3a5;
    }

    .brand-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .brand-name {
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.09em;
      text-transform: uppercase;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .brand-sub {
      font-size: 12px;
      color: var(--text-soft);
    }

    @media (max-width: 680px) {
      .brand-name {
        font-size: 14px;
      }
      .brand-sub {
        font-size: 11px;
      }
    }

    .top-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: nowrap;
    }

    .hours-chip {
      display: inline-flex;
      flex-direction: column;
      gap: 2px;
      padding: 5px 8px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      background: var(--bg-surface);
      font-size: 11px;
      color: var(--text-soft);
      min-width: 140px;
    }

    .hours-line-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .hours-status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .status-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: #1fd073;
      position: relative;
      box-shadow: 0 0 12px rgba(31, 208, 115, 0.6);
    }

    .status-dot::after {
      content: "";
      position: absolute;
      inset: 2px;
      border-radius: inherit;
      background: #e7fdf1;
    }

    :root[data-theme="dark"] .status-dot::after {
      background: #13241c;
    }

    .hours-label {
      font-size: 11px;
    }

    .hours-now {
      font-size: 11px;
      font-weight: 500;
      color: var(--text-main);
      white-space: nowrap;
    }

    .hours-range {
      font-size: 11px;
      color: var(--text-mute);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .btn-pill {
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-subtle);
      background: var(--bg-surface);
      padding: 4px 8px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      font-size: 11px;
      color: var(--text-soft);
      transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
      flex-shrink: 0;
    }

    .btn-pill:hover {
      transform: translateY(-1px);
      border-color: var(--accent-border);
    }

    .theme-toggle-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffe4b2 0, #f8c472 48%, #b6571e 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #4c2710;
    }

    :root[data-theme="dark"] .theme-toggle-thumb {
      background: radial-gradient(circle at 30% 20%, #fdf1c3 0, #f4cf6a 48%, #a45d1a 100%);
    }

    .btn-pill-label {
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .layout-toggle-indicator {
      width: 16px;
      height: 16px;
      border-radius: 6px;
      border: 1px solid var(--border-subtle);
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 2px;
      padding: 2px;
    }

    .layout-toggle-indicator span {
      border-radius: 3px;
      background: rgba(0, 0, 0, 0.06);
    }

    :root[data-theme="dark"] .layout-toggle-indicator span {
      background: rgba(255, 255, 255, 0.08);
    }

    .layout-toggle[data-mode="pdf"] .layout-toggle-indicator {
      grid-template-columns: 1fr;
    }

    .layout-toggle[data-mode="pdf"] .layout-toggle-indicator span:nth-child(2) {
      opacity: 0.3;
    }

    @media (max-width: 720px) {
      .top-bar {
        flex-wrap: wrap;
        row-gap: 6px;
      }
    }

    /* =========================================================================
       FLOATING SEARCH BAR
       ========================================================================= */

    .floating-search-shell {
      position: fixed;
      inset-inline: 0;
      top: 80px;
      display: flex;
      justify-content: center;
      z-index: 18;
      pointer-events: none;
    }

    .floating-search {
      width: 100%;
      max-width: var(--page-max-width);
      padding: 0 16px;
      pointer-events: auto;
    }

    .search-card {
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-subtle);
      background: var(--bg-glass);
      padding: 8px 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.18);
      backdrop-filter: blur(16px);
    }

    :root[data-theme="dark"] .search-card {
      background: var(--bg-glass);
      box-shadow: 0 16px 36px rgba(0, 0, 0, 0.85);
    }

    .search-row {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .search-box {
      position: relative;
      flex: 1 1 220px;
      min-width: 0;
    }

    .search-input {
      width: 100%;
      border-radius: var(--radius-pill);
      border: 1px solid var(--search-border);
      background: var(--search-bg);
      padding: 9px 10px 9px 30px;
      font-size: 14px;
      color: var(--text-main);
      outline: none;
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
    }

    .search-input::placeholder {
      color: var(--search-placeholder);
    }

    .search-input:focus {
      border-color: var(--accent-border);
      box-shadow: 0 0 0 1px var(--accent-border);
      background: #fff8f2;
    }

    :root[data-theme="dark"] .search-input:focus {
      background: rgba(32, 23, 46, 0.98);
    }

    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }

    .search-icon svg {
      width: 14px;
      height: 14px;
      stroke: var(--text-mute);
      stroke-width: 1.7;
      fill: none;
    }

    .chips-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 6px;
      overflow-x: auto;
      padding: 2px 2px 2px 0;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
    }

    .chips-row::-webkit-scrollbar {
      height: 3px;
    }

    .chips-row::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.16);
      border-radius: 999px;
    }

    :root[data-theme="dark"] .chips-row::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.24);
    }

    .chip {
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-subtle);
      background: var(--bg-chip);
      color: var(--text-soft);
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      white-space: nowrap;
      flex-shrink: 0;
      transition: background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
    }

    .chip:hover {
      transform: translateY(-1px);
      border-color: var(--accent-border);
    }

    .chip--active {
      background: var(--bg-chip-active);
      color: #fff;
      border-color: transparent;
    }

    .search-hint {
      font-size: 11px;
      color: var(--text-mute);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .search-hint strong {
      color: var(--accent-strong);
    }

    @media (max-width: 700px) {
      .floating-search {
        padding-inline: 12px;
      }
    }

    /* =========================================================================
       CONTENT SHELL
       ========================================================================= */

    .content-shell {
      margin-top: 104px;
    }

    @media (min-width: 900px) {
      .content-shell {
        margin-top: 116px;
      }
    }

    .sheet {
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-subtle);
      background: var(--bg-surface);
      padding: 18px 12px 18px;
      box-shadow: var(--shadow-soft);
    }

    :root[data-theme="dark"] .sheet {
      background: var(--bg-surface-strong);
    }

    @media (min-width: 900px) {
      .sheet {
        padding: 22px 18px 20px;
      }
    }

    /* =========================================================================
       SHEET HEADER
       ========================================================================= */

    .sheet-header {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 10px;
    }

    .sheet-title {
      font-family: var(--font-serif);
      font-weight: 600;
      font-size: 18px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .sheet-subtitle {
      font-size: 12px;
      color: var(--text-soft);
      max-width: 420px;
      line-height: 1.45;
    }

    .sheet-badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 2px;
    }

    .sheet-badge {
      border-radius: var(--radius-pill);
      background: var(--badge-bg);
      color: var(--badge-text);
      padding: 3px 8px;
      font-size: 11px;
      border: 1px solid var(--accent-border);
    }

    /* =========================================================================
       STATUS ROW
       ========================================================================= */

    .search-status {
      font-size: 11px;
      color: var(--text-mute);
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
      margin-bottom: 10px;
    }

    .search-status-left {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .status-dot-small {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 10px rgba(200, 95, 31, 0.7);
    }

    .status-pill {
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-subtle);
      background: var(--bg-tag);
      padding: 3px 8px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 10px;
    }

    .search-status-right strong {
      color: var(--accent-strong);
    }

    /* =========================================================================
       GRID MENU LAYOUT
       ========================================================================= */

    .menu-layout {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: var(--grid-gap);
      align-items: stretch;
    }

    .menu-layout--pdf {
      grid-template-columns: minmax(0, 1fr);
    }

    .menu-item-card {
      position: relative;
      border-radius: var(--radius-lg);
      border: 1px solid var(--card-border);
      background: var(--card-bg);
      padding: 10px 10px 9px;
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) auto;
      gap: 6px 8px;
      align-items: center;
      cursor: pointer;
      transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .menu-item-main {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      min-width: 0;
    }

    .menu-item-media {
      width: 52px;
      height: 52px;
      border-radius: var(--radius-md);
      overflow: hidden;
      background: #f5c89e;
      flex-shrink: 0;
    }

    .menu-item-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform var(--transition-med), opacity var(--transition-med);
    }

    .menu-item-text {
      min-width: 0;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .menu-item-name {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 500;
    }

    .menu-item-tag {
      font-size: 10px;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    .menu-item-desc {
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.4;
    }

    .menu-item-price {
      font-size: 13px;
      font-weight: 600;
      color: var(--price-color);
      text-align: right;
      white-space: nowrap;
    }

    .menu-item-card:hover {
      background: var(--card-bg-hover);
      border-color: var(--accent-border);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16);
      transform: translateY(-1px);
    }

    .menu-item-card:hover .menu-item-img {
      transform: scale(1.05);
      opacity: 0.96;
    }

    .menu-item-link {
      position: absolute;
      inset: 0;
      z-index: 2;
    }

    /* PDF-like mode */
    .menu-layout--pdf .menu-item-card {
      grid-template-columns: minmax(0, 1.1fr) auto;
      border-radius: 0;
      border-left: none;
      border-right: none;
      box-shadow: none;
      background: transparent;
      padding-inline: 0;
    }

    .menu-layout--pdf .menu-item-media {
      display: none;
    }

    .menu-layout--pdf .menu-item-card:hover {
      background: rgba(0, 0, 0, 0.02);
      border-color: var(--card-border);
      transform: none;
      box-shadow: none;
    }

    .menu-layout--pdf .menu-item-name {
      font-family: var(--font-serif);
      font-size: 14px;
      letter-spacing: 0.14em;
    }

    .menu-layout--pdf .menu-item-desc {
      font-size: 11px;
    }

    .menu-layout--pdf .menu-item-price {
      font-size: 13px;
    }

    @media (max-width: 560px) {
      .menu-item-card {
        grid-template-columns: minmax(0, 1.5fr) auto;
        padding-inline: 8px;
      }
      .menu-item-media {
        width: 46px;
        height: 46px;
      }
      .menu-item-name {
        font-size: 12px;
      }
      .menu-item-price {
        font-size: 12px;
      }
      .menu-item-desc {
        font-size: 10px;
      }
    }

    /* =========================================================================
       EMPTY NOTICE
       ========================================================================= */

    .empty-notice {
      margin-top: 8px;
      border-radius: var(--radius-md);
      border: 1px dashed var(--border-strong);
      background: rgba(255, 255, 255, 0.6);
      padding: 8px 10px;
      font-size: 11px;
      color: var(--text-soft);
    }

    :root[data-theme="dark"] .empty-notice {
      background: rgba(15, 10, 20, 0.96);
    }

    .empty-notice strong {
      color: var(--accent-strong);
    }

    .empty-notice small {
      display: block;
      margin-top: 4px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    /* =========================================================================
       FOOTER
       ========================================================================= */

    .sheet-footer {
      font-size: 10px;
      color: var(--text-mute);
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 14px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .sheet-footer strong {
      color: var(--accent-strong);
    }
  </style>
</head>

<body>
<div class="bg-animated"></div>

<!-- Sticky header -->
<div class="top-shell">
  <header class="top-bar">
    <div class="brand-side">
      <a href="https://www.indian-nepaliswad.fr/" class="brand-logo" aria-label="Indian Nepali Swad – site officiel">
        <img src="https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png" alt="Logo Indian Nepali Swad">
      </a>
    </div>

    <div class="top-right">
      <div class="hours-chip" id="hoursChip" aria-live="polite">
        <div class="hours-line-top">
          <div class="hours-status">
            <div class="status-dot" id="statusDot"></div>
            <span class="hours-label" id="statusLabel">Chargement…</span>
          </div>
          <span class="hours-now" id="hoursNow"></span>
        </div>
        <div class="hours-range" id="hoursRange">–</div>
      </div>

      <div class="header-controls">
        <button type="button" class="btn-pill" id="themeToggle" aria-label="Basculer le thème">
          <span class="btn-pill-label" id="themeLabel"></span>
        </button>

        <button type="button" class="btn-pill layout-toggle" id="layoutToggle" data-mode="grid" aria-label="Basculer le mode d’affichage">
          <div class="layout-toggle-indicator">
            <span></span><span></span><span></span><span></span>
          </div>
        </button>
      </div>
    </div>
  </header>
</div>

<!-- Floating search -->
<div class="floating-search-shell">
  <div class="floating-search">
    <div class="search-card">
      <div class="search-row">
        <div class="search-box">
          <span class="search-icon">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="11" cy="11" r="6.5"></circle>
              <line x1="16" y1="16" x2="20" y2="20"></line>
            </svg>
          </span>
          <input
            id="searchInput"
            class="search-input"
            type="search"
            autocomplete="off"
            placeholder="Rechercher un plat ou une catégorie (naan, menu, curry...)"
          >
        </div>
        <div class="chips-row" id="chipRow">
          <button class="chip chip--active" type="button" data-tag="all">Tout</button>
          <button class="chip" type="button" data-tag="Menu">Menus</button>
          <button class="chip" type="button" data-tag="Entrée">Entrées</button>
          <button class="chip" type="button" data-tag="Curry">Currys</button>
          <button class="chip" type="button" data-tag="Naan">Naans</button>
          <button class="chip" type="button" data-tag="Riz">Riz</button>
          <button class="chip" type="button" data-tag="Végétarien">Végétarien</button>
          <button class="chip" type="button" data-tag="Nouilles">Nouilles</button>
          <button class="chip" type="button" data-tag="Dessert">Desserts</button>
          <button class="chip" type="button" data-tag="Boisson">Boissons</button>
        </div>
      </div>
      <div class="search-hint">
        <span>Astuce : tapez <strong>naan</strong>, <strong>curry</strong> ou le nom du plat.</span>
        <span id="searchHintRight"></span>
      </div>
    </div>
  </div>
</div>

<div class="app-root">
  <div class="content-shell">
    <main class="sheet">
      <header class="sheet-header">
        <h1 class="sheet-title">La carte</h1>
      </header>

      <section class="search-status" aria-live="polite">
        <div class="search-status-left">
          <span class="status-dot-small"></span>
          <span id="resultCountLabel">Toute la carte est affichée.</span>
          <span class="status-pill" id="activeTagLabel">Filtre : Tous les plats</span>
        </div>
        <div class="search-status-right" id="queryInfoLabel">
          Astuce : combinez recherche et catégories pour affiner.
        </div>
      </section>

      <section class="menu-layout" id="menuLayout" aria-label="Carte du restaurant">
        <!-- Filled by JS -->
      </section>

      <div id="emptyNoticeContainer"></div>

      <footer class="sheet-footer">
        <span>Tarifs en euros • Carte du soir</span>
        <span>Indian Nepali Swad • <strong>Paris</strong></span>
      </footer>
    </main>
  </div>
</div>

<script>
  const STORAGE_KEYS = {
    THEME: "ins_theme",
    COOKIES: "ins_cookies",
    SEARCHES: "ins_recent_searches",
    SEARCHES_ENABLED: "ins_searches_enabled"
  };

  const storage = {
    get(key, fallback = null) {
      try {
        const raw = localStorage.getItem(key);
        if (raw === null) return fallback;
        return JSON.parse(raw);
      } catch {
        return fallback;
      }
    },
    set(key, value) {
      try {
        localStorage.setItem(key, JSON.stringify(value));
      } catch {
        // ignore
      }
    }
  };

  const horaires = {
    1: ["11:15-14:45", "18:15-22:45"],
    2: ["11:15-14:45", "18:15-22:45"],
    3: ["11:15-14:45", "18:15-22:45"],
    4: ["11:15-14:45", "18:15-22:45"],
    5: ["11:15-14:45", "18:15-22:45"],
    6: ["11:15-14:45", "18:15-22:45"],
    0: ["11:15-14:45", "18:15-22:45"]
  };

  function parseTimeToMinutes(str) {
    const [h, m] = str.split(":").map(Number);
    return h * 60 + m;
  }

  function isNowInRange(rangeStr) {
    const [start, end] = rangeStr.split("-");
    const now = new Date();
    const minutes = now.getHours() * 60 + now.getMinutes();
    const startM = parseTimeToMinutes(start);
    const endM = parseTimeToMinutes(end);
    return minutes >= startM && minutes <= endM;
  }

  function describeTodayHours() {
    const now = new Date();
    const day = now.getDay();
    const todayRanges = horaires[day];

    if (!todayRanges || !todayRanges.length) {
      return {
        open: false,
        label: "Fermé aujourd’hui",
        now: "",
        full: "Fermé aujourd’hui"
      };
    }

    const openNow = todayRanges.some(r => isNowInRange(r));
    const label = openNow ? "Ouvert maintenant" : "Fermé actuellement";
    const prettyRanges = todayRanges.join(" • ");

    let nowLabel = "";
    if (openNow) {
      const [currentRange] = todayRanges.filter(r => isNowInRange(r));
      const [, end] = currentRange.split("-");
      nowLabel = "jusqu’à " + end;
    }

    return {
      open: openNow,
      label,
      now: nowLabel,
      full:  prettyRanges
    };
  }

  function updateHoursUI() {
    const statusDot = document.getElementById("statusDot");
    const statusLabel = document.getElementById("statusLabel");
    const hoursNow = document.getElementById("hoursNow");
    const hoursRange = document.getElementById("hoursRange");
    const searchHintRight = document.getElementById("searchHintRight");

    const info = describeTodayHours();
    statusLabel.textContent = info.label;
    hoursNow.textContent = info.now;
    hoursRange.textContent = info.full;
    statusDot.style.opacity = info.open ? "1" : "0.4";

    const now = new Date();
    const isMidi = now.getHours() < 16;
    searchHintRight.textContent = isMidi ? "Service midi & soir." : "Service du soir en cours.";
  }

  const themeToggle = document.getElementById("themeToggle");
  const themeThumb = document.getElementById("themeThumb");
  const themeLabel = document.getElementById("themeLabel");

  function applyTheme(theme) {
    const t = theme === "dark" ? "dark" : "light";
    document.documentElement.setAttribute("data-theme", t);
    themeLabel.textContent = t === "dark" ? "Sombre" : "Claire";
  }

  function initTheme() {
    const stored = storage.get(STORAGE_KEYS.THEME, null);
    if (stored === "dark" || stored === "light") {
      applyTheme(stored);
    } else {
      const prefersDark =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;
      applyTheme(prefersDark ? "dark" : "light");
    }

    themeToggle.addEventListener("click", () => {
      const current =
        document.documentElement.getAttribute("data-theme") === "dark"
          ? "dark"
          : "light";
      const next = current === "dark" ? "light" : "dark";
      applyTheme(next);
      storage.set(STORAGE_KEYS.THEME, next);
    });
  }

  const layoutToggle = document.getElementById("layoutToggle");
  const menuLayout = document.getElementById("menuLayout");

  function applyLayoutMode(mode) {
    if (mode === "pdf") {
      menuLayout.classList.add("menu-layout--pdf");
      layoutToggle.setAttribute("data-mode", "pdf");
    } else {
      menuLayout.classList.remove("menu-layout--pdf");
      layoutToggle.setAttribute("data-mode", "grid");
    }
  }

  function initLayoutToggle() {
    layoutToggle.addEventListener("click", () => {
      const current = layoutToggle.getAttribute("data-mode") === "pdf" ? "pdf" : "grid";
      const next = current === "pdf" ? "grid" : "pdf";
      applyLayoutMode(next);
    });
  }

  const products = [
    {name:"Menu Spécial",price:"18,90€",link:"./?q=Menu+Spécial",image:"https://www.indian-nepaliswad.fr/37%20menu%20special.jpg",tag:"Menu"},
    {name:"Menu Best Deal",price:"24,90€",link:"./?q=Menu+Best+Deal",image:"https://www.indian-nepaliswad.fr/39%20menu%20best%20deal.jpg",tag:"Menu"},
    {name:"Menu végétarien",price:"18,90€",link:"./?q=Menu+végétarien",image:"https://www.indian-nepaliswad.fr/menuveg.jpg",tag:"Menu"},
    {name:"Combo sauces",price:"1,00€",link:"./?q=Combo+de+3+sauces",image:"https://www.indian-nepaliswad.fr/42%20sauces.jpg",tag:"Sauce"},
    {name:"Set de couverts",price:"0,50€",link:"./?q=Set+de+couverts",image:"https://www.indian-nepaliswad.fr/10%20naan%20garlic.jpg",tag:"Extra"},
    {name:"Naan fromage",price:"4,90€",link:"./?q=Naan+fromage",image:"https://www.indian-nepaliswad.fr/12 naan fromage.jpg",tag:"Naan"},
    {name:"Garlic naan",price:"4,50€",link:"./?q=Garlic+naan",image:"https://www.indian-nepaliswad.fr/9%20naan%20nepalais.jpg",tag:"Naan"},
    {name:"Naan nature",price:"2,90€",link:"./?q=Naan+nature",image:"https://www.indian-nepaliswad.fr/11 naan nature.jpg",tag:"Naan"},
    {name:"Naan Indian Nepali Swad",price:"6,50€",link:"./?q=Naan+Indian+Nepali+Swad",image:"https://www.indian-nepaliswad.fr/9 naan nepalais.jpg",tag:"Naan"},
    {name:"Keema Naan",price:"6,50€",link:"./?q=Keema+Naan",image:"https://www.indian-nepaliswad.fr/10 naan garlic.jpg",tag:"Naan"},
    {name:"Roti Chapati",price:"3,00€",link:"./?q=Roti+Chapati",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Naan"},
    {name:"Papadam",price:"1,00€",link:"./?q=Papadam",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Naan"},
    {name:"Poulet tandoori",price:"8,50€",link:"./?q=Poulet+tandoori",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Entrée"},
    {name:"Samoussas légumes",price:"7,50€",link:"./?q=Samoussas+légumes",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Entrée"},
    {name:"Samoussas poulet",price:"8,50€",link:"./?q=Samoussas+poulet",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Entrée"},
    {name:"Poulet Tikka",price:"8,90€",link:"./?q=Poulet+Tikka",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Entrée"},
    {name:"Onion Bhaji",price:"6,90€",link:"./?q=Onion+Bhaji",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Entrée"},
    {name:"Pakora",price:"7,50€",link:"./?q=Pakora",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Entrée"},
    {name:"Seekh kebab",price:"8,50€",link:"./?q=Seekh+kebab",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Entrée"},
    {name:"Poulet butter",price:"14,50€",link:"./?q=Poulet+butter",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Poulet Tikka Masala",price:"14,50€",link:"./?q=Poulet+Tikka+Masala",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Madras",price:"13,90€",link:"./?q=Madras",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Shahi korma",price:"14,50€",link:"./?q=Shahi+korma",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Biryani",price:"16,50€",link:"./?q=Biryani",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Riz"},
    {name:"Poulet au curry",price:"12,90€",link:"./?q=Poulet+au+curry",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Palak",price:"13,90€",link:"./?q=Palak",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Agneau Spécial Népali Swad",price:"15,50€",link:"./?q=Agneau+Spécial+Népali+Swad",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Vindaloo",price:"13,90€",link:"./?q=Vindaloo",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Poulet Dahl",price:"13,90€",link:"./?q=Poulet+Dahl",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Curry",price:"12,90€",link:"./?q=Curry",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Agneau Dahl",price:"14,90€",link:"./?q=Agneau+Dahl",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Bharta",price:"13,90€",link:"./?q=Bharta",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Poulet Masala",price:"14,50€",link:"./?q=Poulet+Masala",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Masala",price:"14,50€",link:"./?q=Masala",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Dahl",price:"13,90€",link:"./?q=Dahl",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Curry"},
    {name:"Dahl Tadka",price:"11,90€",link:"./?q=Dahl+Tadka",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Végétarien"},
    {name:"Palak paneer",price:"12,50€",link:"./?q=Palak+paneer",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Végétarien"},
    {name:"Bhaigan bharta",price:"12,90€",link:"./?q=Bhaigan+bharta",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Végétarien"},
    {name:"Légumes biryani",price:"14,50€",link:"./?q=Légumes+biryani",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Riz"},
    {name:"Légumes korma",price:"12,90€",link:"./?q=Légumes+korma",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Végétarien"},
    {name:"Légume curry",price:"10,90€",link:"./?q=Légume+curry",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Végétarien"},
    {name:"Chau-Min poulet",price:"14,90€",link:"./?q=Chau-Min+poulet",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Nouilles"},
    {name:"Chau-Min légumes",price:"13,90€",link:"./?q=Chau-Min+légumes",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Nouilles"},
    {name:"Chau-Min crevettes",price:"16,90€",link:"./?q=Chau-Min+crevettes",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Nouilles"},
    {name:"Chau-Min agneau",price:"15,90€",link:"./?q=Chau-Min+agneau",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Nouilles"},
    {name:"Riz basmati",price:"3,90€",link:"./?q=Riz+basmati",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Riz"},
    {name:"Riz safran",price:"4,40€",link:"./?q=Riz+safran",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Riz"},
    {name:"Matar pulao",price:"5,40€",link:"./?q=Matar+pulao",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Riz"},
    {name:"Suji Halwa",price:"5,90€",link:"./?q=Suji+Halwa",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Dessert"},
    {name:"Gulab Jamun",price:"5,90€",link:"./?q=Gulab+Jamun",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Dessert"},
    {name:"Lassi maison",price:"6,50€",link:"./?q=Lassi+maison",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Boisson"},
    {name:"Lassi Mangue",price:"6,50€",link:"./?q=Lassi+Mangue",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Boisson"},
    {name:"Coca-cola zéro",price:"2,00€",link:"./?q=Coca-cola+zéro",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Boisson"},
    {name:"Coca-cola",price:"2,00€",link:"./?q=Coca-cola",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Boisson"},
    {name:"Ice Tea Pêche",price:"2,00€",link:"./?q=Ice+Tea+Pêche",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Boisson"},
    {name:"Eau plate 50cl",price:"3,00€",link:"./?q=Eau+plate+50cl",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Boisson"},
    {name:"Fanta orange",price:"2,00€",link:"./?q=Fanta+orange",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Boisson"},
    {name:"Set de couverts",price:"0,50€",link:"./?q=Set+de+couverts",image:"https://www.indian-nepaliswad.fr/etc/apple-touch-icon.png",tag:"Extra"}
  ];

  const tagDescriptions = {
    "Menu": "Menus complets pour découvrir plusieurs spécialités.",
    "Entrée": "Entrées chaudes et croustillantes.",
    "Curry": "Currys mijotés, parfaits avec naan ou riz.",
    "Naan": "Pains maison cuits au tandoor.",
    "Riz": "Riz basmati nature ou parfumé.",
    "Végétarien": "Plats sans viande, généreux en légumes.",
    "Nouilles": "Nouilles sautées façon indo-népalaise.",
    "Dessert": "Spécialités sucrées.",
    "Boisson": "Boissons fraîches et lassi.",
    "Sauce": "Sauces d’accompagnement.",
    "Extra": "Suppléments et couverts."
  };

  const searchInput = document.getElementById("searchInput");
  const chipRow = document.getElementById("chipRow");
  const resultCountLabel = document.getElementById("resultCountLabel");
  const activeTagLabel = document.getElementById("activeTagLabel");
  const queryInfoLabel = document.getElementById("queryInfoLabel");
  const emptyNoticeContainer = document.getElementById("emptyNoticeContainer");

  function normalize(str) {
    return str
      .toString()
      .toLowerCase()
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "");
  }

  function debounce(fn, delay) {
    let timer;
    return function (...args) {
      clearTimeout(timer);
      timer = setTimeout(() => fn.apply(this, args), delay);
    };
  }

  let state = {
    tag: "all",
    query: ""
  };

  function filterProducts(list, query, tag) {
    const q = normalize(query.trim());
    const hasQ = q.length > 0;

    return list.filter(item => {
      const tagOk = tag === "all" ? true : item.tag === tag;
      if (!hasQ) return tagOk;
      const nameN = normalize(item.name);
      const tagN = normalize(item.tag);
      return tagOk && (nameN.includes(q) || tagN.includes(q));
    });
  }

  function buildItemHTML(p) {
    const wantDesc = ["Menu", "Curry", "Végétarien", "Nouilles"].includes(p.tag);
    const desc = wantDesc ? (tagDescriptions[p.tag] || "") : "";
    const tagLabel = p.tag;

    return `
      <article class="menu-item-card">
        <a class="menu-item-link" href="${p.link}" aria-label="${p.name} – ${p.price}"></a>
        <div class="menu-item-main">
          <div class="menu-item-media">
            <img src="${p.image}" alt="${p.name}" class="menu-item-img">
          </div>
          <div class="menu-item-text">
            <h3 class="menu-item-name">${p.name}</h3>
            <div class="menu-item-tag">${tagLabel}</div>
            ${desc ? `<p class="menu-item-desc">${desc}</p>` : ""}
          </div>
        </div>
        <div class="menu-item-price">${p.price}</div>
      </article>
    `;
  }

  function renderMenu(list, query, tag) {
    menuLayout.innerHTML = list.map(buildItemHTML).join("");

    if (!query && tag === "all") {
      resultCountLabel.textContent = "Toute la carte est affichée.";
      activeTagLabel.textContent = "Filtre : Tous les plats";
      queryInfoLabel.textContent = "Astuce : tapez un nom ou une catégorie pour filtrer.";
    } else {
      resultCountLabel.textContent =
        `${list.length} résultat${list.length > 1 ? "s" : ""} affiché${list.length > 1 ? "s" : ""}.`;
      const tagLabel = tag === "all" ? "Tous les plats" : tag;
      activeTagLabel.textContent = `Filtre : ${tagLabel}`;
      if (query) {
        queryInfoLabel.innerHTML = `Recherche : <strong>${query}</strong>`;
      } else {
        queryInfoLabel.textContent = "Filtre par catégorie sans texte de recherche.";
      }
    }

    emptyNoticeContainer.innerHTML = "";
  }

  function showEmpty(query) {
    emptyNoticeContainer.innerHTML = `
      <div class="empty-notice">
        <strong>Aucun plat trouvé pour « ${query} ».</strong>
        <small>La carte complète reste affichée pour poursuivre la navigation.</small>
      </div>
    `;
    renderMenu(products, "", "all");
  }

  function applyFilters() {
    const filtered = filterProducts(products, state.query, state.tag);
    if (!filtered.length && (state.query || state.tag !== "all")) {
      showEmpty(state.query);
    } else {
      renderMenu(filtered, state.query, state.tag);
    }
  }

  const debouncedApply = debounce(applyFilters, 120);

  searchInput.addEventListener("input", e => {
    state.query = e.target.value;
    debouncedApply();
  });

  chipRow.addEventListener("click", e => {
    const chip = e.target.closest(".chip");
    if (!chip) return;
    const tag = chip.dataset.tag || "all";
    state.tag = tag;
    chipRow.querySelectorAll(".chip").forEach(c => c.classList.remove("chip--active"));
    chip.classList.add("chip--active");
    applyFilters();
  });

  function initFromUrl() {
    const params = new URLSearchParams(window.location.search);
    const q = params.get("q");
    if (q) {
      const decoded = decodeURIComponent(q.replace(/\+/g, " "));
      state.query = decoded;
      searchInput.value = decoded;
    }
    applyFilters();
  }

  initTheme();
  initLayoutToggle();
  updateHoursUI();
  initFromUrl();
</script>

</body>
</html>
